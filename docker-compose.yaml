services:
  meshmap:
    build: ./backend
    container_name: meshmap-live
    ports:
      - "${WEB_PORT:-8080}:8080"
    environment:
      DEBUG_PAYLOAD: "${DEBUG_PAYLOAD}"
      DEBUG_PAYLOAD_MAX: "${DEBUG_PAYLOAD_MAX}"
      PAYLOAD_PREVIEW_MAX: "${PAYLOAD_PREVIEW_MAX}"
      STATE_DIR: "${STATE_DIR}"
      STATE_SAVE_INTERVAL: "${STATE_SAVE_INTERVAL}"
      SITE_TITLE: "${SITE_TITLE}"
      SITE_DESCRIPTION: "${SITE_DESCRIPTION}"
      SITE_OG_IMAGE: "${SITE_OG_IMAGE}"
      SITE_URL: "${SITE_URL}"
      SITE_ICON: "${SITE_ICON}"
      SITE_FEED_NOTE: "${SITE_FEED_NOTE}"
      MQTT_HOST: "${MQTT_HOST}"
      MQTT_PORT: "${MQTT_PORT}"
      MQTT_USERNAME: "${MQTT_USERNAME}"
      MQTT_PASSWORD: "${MQTT_PASSWORD}"
      MQTT_TRANSPORT: "${MQTT_TRANSPORT}"
      MQTT_WS_PATH: "${MQTT_WS_PATH}"
      MQTT_TLS: "${MQTT_TLS}"
      MQTT_TOPIC: "${MQTT_TOPIC}"
      DEVICE_TTL_SECONDS: "${DEVICE_TTL_SECONDS}"
      HEAT_TTL_SECONDS: "${HEAT_TTL_SECONDS}"
      TRAIL_LEN: "${TRAIL_LEN}"
      ROUTE_TTL_SECONDS: "${ROUTE_TTL_SECONDS}"
      MESSAGE_ORIGIN_TTL_SECONDS: "${MESSAGE_ORIGIN_TTL_SECONDS}"
      MAP_START_LAT: "${MAP_START_LAT}"
      MAP_START_LON: "${MAP_START_LON}"
      MAP_START_ZOOM: "${MAP_START_ZOOM}"
    restart: unless-stopped
    volumes:
      - ./data:/data
